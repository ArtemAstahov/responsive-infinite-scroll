"use strict";var ScrollNavigationView=Backbone.View.extend({initialize:function(t){if(this.options=t,this.fetchColumns(),"undefined"==typeof window.location.hash||""==window.location.hash)this.addMoreItems();else{var e=window.location.hash;"#"===e.substring(0,1)&&(e=e.substring(1)),"!"===e.substring(0,1)&&(e=e.substring(1)),this.addMoreItems()}},fetchColumns:function(){var t=this;console.log(this.options.columnsSelector+":visible");var e=$(this.options.columnsSelector+":visible"),o=0!==this.$columns.length;t.$columns.length!==e.length&&(t.$columns=[],e.each(function(e,o){t.$columns.push($(o))}),o&&t.resetItems())},$columns:[],itemCount:-1,resetItems:function(){this.model.set("noMoreItems",0),this.addMoreItems(),this.itemCount=-1;var t=!0;"undefined"!=typeof this.options.onResetData&&(t=this.options.onResetData()!==!1),t&&_.each(this.$columns,function(t){t.html("")})},events:{"click .btn-more":"addMoreItems"},getShortenColumn:function(){for(var t=this,e=function(e){var o;return"undefined"!=typeof t.options.onCountLenght&&(o=t.options.onCountLenght(e)),"undefined"!=typeof o&&(o=e.height()),o},o=this.columns[1],n=e(o),i=1;i<this.columns.length;i++){var s=this.columns[i],h=e(s);if(h>n){var o=s;n=h}}return o},addMoreItems:function(){var t=this;this.model.hasMore()?(this.$el.find(".btn-more, .no-more-state").hide(),this.$el.find(".load-state").show(),this.model.getMore(function(e){t.renderItems(e)})):(this.$el.find(".btn-more, .load-state").hide(),this.$el.find(".no-more-state").show())},renderItems:function(t){var e=this,o=e.$el.find(this.options.setup.itemTemplateSelector).html();"undefined"==typeof o&&jQuery.error("Missing pod prototype (check the podPrototypeSelector: "+this.options.podPrototypeSelector+")");var n=function(t,i){e.itemCount=e.itemCount+1;var s=jQuery("<div/>",{"class":e.options.podClass,html:_.template(o,i[t])});("undefined"==typeof e.options.onAddItem||e.options.onAddItem(e.itemCount,e.getShortenColumn(),s,i[t])!==!1)&&s.appendTo(e.getShortenColumn()),t<i.length-1?setTimeout(function(){n(t+1,i)},10):"undefined"!=typeof e.options.onFinishRendering&&e.options.onFinishRendering(i.length)};n(0,t)}});